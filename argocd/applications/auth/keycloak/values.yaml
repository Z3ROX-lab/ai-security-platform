# Keycloak values for AI Security Platform (Home Lab)
# Chart: codecentric/keycloakx 7.1.7

replicas: 1

# Args for production mode (entrypoint is already kc.sh)
args:
  - "start"
  - "--http-enabled=true"
  - "--hostname-strict=false"
  - "--proxy=edge"

# Database configuration (external PostgreSQL via CNPG)
database:
  vendor: postgres
  hostname: postgresql-cluster-rw.storage.svc
  port: 5432
  database: keycloak
  username: keycloak
  existingSecret: keycloak-db-secret
  existingSecretKey: password

# HTTP settings
http:
  relativePath: "/"

# Health & metrics
health:
  enabled: true
metrics:
  enabled: true

# Ingress via Traefik
ingress:
  enabled: true
  ingressClassName: traefik
  rules:
    - host: auth.ai-platform.localhost
      paths:
        - path: /
          pathType: Prefix

# Resources for home lab
resources:
  requests:
    cpu: "250m"
    memory: "512Mi"
  limits:
    cpu: "1000m"
    memory: "768Mi"

# Admin credentials
extraEnv: |
  - name: KEYCLOAK_ADMIN
    value: admin
  - name: KEYCLOAK_ADMIN_PASSWORD
    value: admin123
  - name: KC_HOSTNAME
    value: auth.ai-platform.localhost