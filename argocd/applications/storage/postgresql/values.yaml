# PostgreSQL Cluster values for AI Security Platform (Home Lab)
# Chart: https://cloudnative-pg.github.io/charts/cluster
# Uses CloudNativePG operator (CNCF project)

# Cluster name override
fullnameOverride: "postgresql-cluster"

# Mode: standalone (not replica or recovery)
mode: standalone

cluster:
  # Number of instances - single for home lab
  instances: 1

  # Storage configuration
  storage:
    size: 5Gi
    storageClass: local-path

  # Resources for home lab
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Bootstrap configuration - create initial databases
  initdb:
    database: appdb
    owner: appuser
    postInitSQL:
      - CREATE DATABASE keycloak;
      - CREATE DATABASE mlflow;
      - CREATE DATABASE openwebui;

  # Monitoring (disable for now)
  monitoring:
    enabled: false

# Backups disabled for home lab
backups:
  enabled: false
